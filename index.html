<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Alfred-cron by shawnrice</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Alfred-cron<img class='icon' src='icon.png' width='50px' /></h1>
        <p>A workflow that allows for a fake cron to be run and managed through Alfred 2</p>
        <p class="view"><a href="https://github.com/shawnrice/alfred-cron">View the Project on GitHub <small>shawnrice/alfred-cron</small></a></p>
        <ul>
          <li><a href="https://github.com/shawnrice/alfred-cron/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/shawnrice/alfred-cron/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/shawnrice/alfred-cron">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

<p>This is not a true cron in that it doesn’t run commands at a specified time. Why? Cron doesn’t make sense to have on most regular computers; for servers, it makes sense because the servers are <strong>always</strong> on. If your laptop is off, closed, or asleep, then it won’t run a cron command at the correct time. The same goes with a desktop Mac.</p>

<p>So, if want a command to be run daily at midnight, then it might not happen. Hence, Alfred Cron uses an “interval” system. So, if you want something run once per day, then it will run the command if it hasn’t been run for a day, which makes sense for a user computer.</p>
<p>Timed commands are are</p>
<h3>How do I define a cron “job”?</h3>

<p>Jobs are written as bash commands. So, if you want to write a bash script, then you can do it in the “add job” dialog box. This doesn’t mean that other types of scripts are not possible. If you want to run a python script, then your job will just run:</p>

<p><code>python “/path/to/python/script.py” ‘arg’</code></p>

<h3>Add / Edit / Enable / Disable / Delete Jobs</h3>
<p>Alfred Cron uses Pashua to help add and edit jobs with a nice GUI. After adding a job, it will automatically be enabled. If you want to pause a job for a while, then just disable it. If a job returns an error code, then it will be disabled, and you’ll be sent a notification that the job had an error. You can also delete jobs. Remember, deleted jobs are unrecoverable.</p>

<h3>What sort of jobs can I create?</h3>
<p>Well, anything. There are two examples below, but, really, you can run anything you can script. Please share good examples of things you’ve written.</p>

<p>Also, I’ve heard that Alfred 2.3 contains external triggers for workflows, so you can run a workflow at any particular time.</p>

<h3>Logs</h3>
<p>A log file exists for you to peruse in the Alfred Cron data directory. Log files should not exceed 2mb. When a log file hits the limit, then it will be renamed to alfred-cron.log.old, and a new file will be created. Only one older log is kept.</p>

<h3>Alfred Bundler</h3>
<p>Alfred Cron users the Alfred Bundler to download and use libraries and utility apps (Pashua, Terminal Notifier). So, if you’re running the Alfred Cron workflow initially, it might take a few minutes to set itself up. Also, if you have Gatekeeper turned on, then you will be prompted to enter an Administrator password to “whitelist” the utility applications.</p>

<h2>Tips:</h2>

<ul>
<li>Bash variables are available for you.</li>

<li>The cron daemon runs under your user account, not root. So, if you want to do anything that would require sudo, then you should authorize that command for sudo for your user. If you want a safe way to add entries to your sudoers file, then look into my <a href="">“sudoers” workflow</a>, which checks the syntax of the entry so as not to break your sudoers file.</li>

<li>Quote all of your paths. If there is a space in the path, then things might break.</li>

<li>Unless you install the launchd script that accompanies the workflow, then Alfred Cron will not run at startup: you’ll have to start it manually.</li>

<li>Debug your scripts before adding them to cron. If a script returns an error code, then the Alfred Cron daemon will disable the script and log an error. You can always check the log for output.</li>

<li>The daemon runs every 60 seconds (or as close to it as possible). So, setting something to run every 15 seconds is pointless. If you want the daemon to run either more or less often, then change the runInterval variable in alfred-cron.sh. Note: updates will overwrite this setting. But, honestly, 60 seconds is a sane value.</li>

<li>If you run a script that uses an internet connection to retrieve / push data, then make sure that you catch timeout errors so that they aren’t sent back to cron.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/shawnrice">shawnrice</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>
</html>
